day03爬虫

1.代理ip池、阿布云使用

​	如何使用本地代理列表

​		见1-pool.py文件

​	如何使用阿布云代理

​		见2-abuyun.py文件

2.cookie使用

```python
cookie是什么? 
	http的特点: 无状态
    	客户端		服务器
      	每一次请求都是单独的请求, 请求之间没有任何关系
    登录时是一个请求
    访问登录后的页面有事一个请求, 这两个请求必须有关系, 所以引入 了cookie
    
    登录的时候, 服务端给你响应, 在响应里面就有cookie, 浏览器就会将cookie保存起来, 下次再请求的时候, 就会带着cookie来访问
    
    需求: 通过代码访问登录后的页面
    ①通过抓包
    	首先让浏览器登陆成功, 然后浏览器再访问登录后页面的时候, 你来抓包, 抓取到请求头里的cookie信息, 然后写到代码中即可
      见3-cookie.py文件
    ②模拟登录
    	首先抓包抓取post请求, 通过代码模拟发送post请求, 然后创建ck对象, 用来保存和携带cookie即可
      见4-moni.py文件
```

3.正则表达式		-- 见5-re.py文件

```python
为什么引入正则表达式?
	字符串函数: string.find('abc123@qq.com'),可以查找所有的邮箱, 可以验证优邮箱格式是否正确, 可以匹配一类东西
    
    因为有规格,  学习正则就是学习规则.
    女人的心, 医生的处方, 道士的符,  程序员的正则
    
    单字符规则:只能匹配一个
      /d : 所有的数字字符
      /D : 非/d
      /w : 数字,字母,下划线,中文
      /W : 非/w
      /s : 匹配所有的空白字符 \n \t 空格
      /S : 非/s
      [] : [aeiou]其中之一
      [^aeiou] : 除了里面写的都能匹配
      .  : 除了\n以外任意字符

	数量修饰: 
      {m} : 修饰前面的一个字符出现m次
      {m,}: 修饰前面的一个字符最少m次	贪婪的  能多匹配就多匹配
      {m,n}: 最少m次, 最多n次
      {0,} : 任意多次   *   最少0次,最多无限
      {1,} : 最少1次	 +
      {o,1} : 可有可无	?
        
	在python里面如何使用?
    	import re  (导入热模块)
      	pattern = re.compile(r'xxx')
      	pattern.match()		从字符串开头查找, 找到一个立马结束
        pattern.search()	从字符串任意位置开始查找, 找到一个立马结束
        pattern.findall()	返回列表, 得到所有匹配的内容
        
	边界修饰:
      	^ : 以某某开头
        $ : 以某某结尾
    
    分组:(正则的高级功能)
      1.视为一个整体		(a\d{5})	整体出现五次
      2.子模式、分组		(\w+)(\d+)\2\1(sublime编辑器)或是$2$1(PyCharm编辑器)
      		\1\2	第一个和第二个小括号的内容
        	$1$2	第一个和第二个小括号的内容
          如果有子模式 ret.group(1)就是第一个子模式匹配的内容...

	贪婪:
      	.*
        .+
        .*?		取消贪婪
        .+?		取消贪婪
        
	模式修正:
      	re.I	忽略大小写
        re.M	忽略换行符, 视为多行模式
        re.S	忽略换行符, 视为单行模式
      
```



4.正则案例		-- 见6-qiushi.py	7-lizhi.py文件

​	糗事百科糗图



​	图片下载:

​		防盗链, 直接通过urllib.request.urlretrieve()下载不了

​		在 请求头部有一个referer, 判断头部是不是从这个网站过来的, 如果是, 可以看图片, 如果不是, 图片不让看

​		通过 程序看这个图片的时候, 需要受用定制Referer: , 定制为网站的首页即可, 需要通过构建请求对象, 发送请求, 将  写到文件中这种方式

